<div class="background-video-container">
  <iframe
    class="background-video"
    src="https://www.youtube.com/embed/_o7VAA57Zv8?autoplay=1&mute=1&controls=0&loop=1&playlist=_o7VAA57Zv8"
    frameborder="0"
    allow="autoplay; encrypted-media"
    allowfullscreen
  ></iframe>
</div>

<div class="welcome-message-container">
  <h1 class="welcome-message">Create Your Capsule</h1>
</div>

<div class="login-form">
  <form (ngSubmit)="onSubmit()" #capsuleForm="ngForm">
    <!-- Title -->
    <mat-form-field class="input-field" floatLabel="always">
      <mat-label>Title</mat-label>
      <input
        matInput
        id="title"
        [(ngModel)]="capsule.title"
        name="title"
        placeholder="Enter capsule title"
      />
    </mat-form-field>

    <!-- Message -->
    <mat-form-field class="input-field" floatLabel="always">
      <mat-label>Your Message</mat-label>
      <textarea
        matInput
        id="message"
        [(ngModel)]="capsule.message"
        name="message"
        rows="4"
        placeholder="Write your message here..."
      ></textarea>
    </mat-form-field>

    <!-- Date to Open -->
    <mat-form-field class="input-field" floatLabel="always">
      <mat-label>Date to Open</mat-label>
      <input
        matInput
        type="date"
        id="lockDate"
        [(ngModel)]="capsule.lockDate"
        name="lockDate"
      />
    </mat-form-field>

    <!-- Recipient -->
    <mat-form-field class="input-field" floatLabel="always">
      <mat-label>Receiver</mat-label>
      <input
        matInput
        id="recipientUsername"
        [(ngModel)]="capsule.recipientUsername"
        name="recipientUsername"
        placeholder="Enter recipient username"
      />
    </mat-form-field>

    <!-- Tags -->
    <div class="tags-section">
      <label class="tags-label">Select Tags</label>
      <div class="tags-container">
        <mat-checkbox
          *ngFor="let tag of availableTags"
          class="tag-checkbox"
          [checked]="selectedTagIDs.includes(tag.tagID)"
          (change)="onTagSelection(tag.tagID)"
        >
          {{ tag.tagName }}
        </mat-checkbox>
      </div>
    </div>

    <!-- Error and success messages -->
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success">{{ successMessage }}</div>

    <!-- Buttons -->
    <button mat-raised-button color="primary" type="submit" class="login-button">
      Create Capsule
    </button>
    <button mat-raised-button color="warn" type="button" class="signup-button" (click)="goBack()">
      Go Back
    </button>
  </form>
</div>
