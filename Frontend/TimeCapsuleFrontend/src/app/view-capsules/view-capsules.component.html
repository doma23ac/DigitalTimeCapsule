<div class="capsules-container">
  <h1 class="header">Capsules Ready to Open</h1>
  
  <p *ngIf="error" class="error">{{ error }}</p>

  <div *ngIf="!error && capsules.length === 0" class="no-capsules">
    <p>No capsules are ready to open at this time.</p>
  </div>

  <div *ngIf="capsules.length > 0" class="capsules-list">
    <mat-card *ngFor="let capsule of capsules" class="capsule-item">
      <mat-card-header>
        <mat-card-title>{{ capsule.title }}</mat-card-title>
        <mat-card-subtitle>Sender: {{ capsule.senderUsername }} | Lock Date: {{ capsule.lockDate | date }}</mat-card-subtitle>
      </mat-card-header>

      <!-- Display tags as white bubbles -->
      <div class="tags-container">
        <span *ngFor="let tag of capsule.tags" class="tag-bubble">{{ tag.tagName }}</span>
      </div>

      <button mat-raised-button class="toggle-btn" (click)="toggleCapsuleMessage(capsule.capsuleID)">
        {{ expandedCapsuleID === capsule.capsuleID ? 'Hide Message' : 'Show Message' }}
      </button>

      <div *ngIf="expandedCapsuleID === capsule.capsuleID" class="capsule-message">
        <p><strong>Message:</strong> {{ capsule.message }}</p>
        <button mat-raised-button color="accent" class="open-btn" (click)="markCapsuleAsOpened(capsule)">Mark as Opened</button>
      </div>
    </mat-card>
  </div>
</div>



  
  