<div class="background-video-container">
  <iframe
    class="background-video"
    src="https://www.youtube.com/embed/IYL6f_qYb-g?autoplay=1&mute=1&controls=0&loop=1&playlist=IYL6f_qYb-g"
    frameborder="0"
    allow="autoplay; encrypted-media"
    allowfullscreen>
  </iframe>
</div>

<div class="capsules-container">
  <h1 class="header">Capsules Ready to Open</h1>
  
  <p *ngIf="error" class="error">{{ error }}</p>

  <!-- Checkbox Filter Section -->
  <div class="filter-container">
    <h2>Select Tags to Filter</h2>
    <div class="tag-checkbox-container">
      <label *ngFor="let tag of availableTags" class="tag-checkbox">
        <input
          type="checkbox"
          [value]="tag.tagID"
          (change)="onTagCheckboxChange($event)"
        />
        {{ tag.tagName }}
      </label>
    </div>
  </div>

  <!-- Capsules Display -->
  <div *ngIf="filteredCapsules.length === 0">
    <p>No capsules match your selected tags.</p>
  </div>

  <div *ngIf="filteredCapsules.length > 0">
    <mat-card *ngFor="let capsule of filteredCapsules" class="capsule-item">
      <mat-card-header>
        <mat-card-title>{{ capsule.title }}</mat-card-title>
        <mat-card-subtitle>
          Sender: {{ capsule.senderUsername }} | Lock Date: {{ capsule.lockDate | date }}
        </mat-card-subtitle>
      </mat-card-header>

      <div class="tags-container">
        <span *ngFor="let tag of capsule.tags" class="tag-bubble">{{ tag.tagName }}</span>
      </div>

      <button mat-raised-button class="toggle-btn" (click)="toggleCapsuleMessage(capsule.capsuleID)">
        {{ expandedCapsuleID === capsule.capsuleID ? 'Hide Message' : 'Show Message' }}
      </button>

      <div *ngIf="expandedCapsuleID === capsule.capsuleID" class="capsule-message">
        <p><strong>Message:</strong> {{ capsule.message }}</p>
        <button mat-raised-button color="warn" class="delete-btn" (click)="deleteCapsule(capsule.capsuleID)">
          Delete Capsule
        </button>
      </div>
    </mat-card>
  </div>
</div>

  
  
  